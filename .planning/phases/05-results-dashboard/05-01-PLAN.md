---
phase: 05-results-dashboard
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ui/badge.tsx
  - src/components/ui/progress.tsx
  - src/lib/nis2/types.ts
  - src/lib/nis2/recommendations.ts
  - src/messages/de.json
  - src/messages/en.json
autonomous: true

must_haves:
  truths:
    - "Badge and Progress shadcn/ui components are installed and importable"
    - "Every recommendation has an effortLevel field (quick, medium, strategic)"
    - "All results page i18n keys exist in both DE and EN translation files"
    - "Existing functionality (gap-analysis, check wizard) still works after changes"
  artifacts:
    - path: "src/components/ui/badge.tsx"
      provides: "shadcn/ui Badge component"
      min_lines: 10
    - path: "src/components/ui/progress.tsx"
      provides: "shadcn/ui Progress component"
      min_lines: 10
    - path: "src/lib/nis2/types.ts"
      provides: "EffortLevel type and updated Recommendation interface"
      contains: "effortLevel"
    - path: "src/lib/nis2/recommendations.ts"
      provides: "All 20 recommendations with effortLevel field"
      contains: "effortLevel"
    - path: "src/messages/de.json"
      provides: "German translations for results page"
      contains: "results"
    - path: "src/messages/en.json"
      provides: "English translations for results page"
      contains: "results"
  key_links:
    - from: "src/lib/nis2/recommendations.ts"
      to: "src/lib/nis2/types.ts"
      via: "imports Recommendation type with effortLevel"
      pattern: "effortLevel.*quick|medium|strategic"
---

<objective>
Install missing shadcn/ui components (Badge, Progress), extend the Recommendation type with effortLevel, and add all i18n translations for the results dashboard page.

Purpose: The results page UI (Plan 02) needs Badge for effort tags, Progress for score bars, effortLevel data for quick wins logic, and translation keys for all user-facing text. Without these, Plan 02 cannot build the dashboard.

Output: Two new shadcn/ui components, updated Recommendation type+data, and complete DE/EN translations for the results page.
</objective>

<execution_context>
@C:\Users\mjoan\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\mjoan\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-results-dashboard/05-CONTEXT.md
@.planning/phases/05-results-dashboard/05-RESEARCH.md
@src/lib/nis2/types.ts
@src/lib/nis2/recommendations.ts
@src/messages/de.json
@src/messages/en.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install shadcn/ui Badge and Progress components</name>
  <files>src/components/ui/badge.tsx, src/components/ui/progress.tsx</files>
  <action>
Run the following shadcn CLI commands to install the missing components:

```bash
npx shadcn@latest add badge
npx shadcn@latest add progress
```

After installation, verify both files exist in `src/components/ui/` and can be imported. These are standard shadcn/ui components wrapping Radix UI primitives -- do NOT hand-roll custom versions.
  </action>
  <verify>
Files `src/components/ui/badge.tsx` and `src/components/ui/progress.tsx` exist.
Run `npx tsc --noEmit` to verify no type errors.
  </verify>
  <done>Badge and Progress components are installed and type-check clean.</done>
</task>

<task type="auto">
  <name>Task 2: Add effortLevel to Recommendation type and data</name>
  <files>src/lib/nis2/types.ts, src/lib/nis2/recommendations.ts</files>
  <action>
**In `src/lib/nis2/types.ts`:**

1. Add a new type alias above the Recommendation interface:
```typescript
export type EffortLevel = 'quick' | 'medium' | 'strategic';
```

2. Add `effortLevel: EffortLevel;` field to the `Recommendation` interface, after `priority`.

**In `src/lib/nis2/recommendations.ts`:**

Add `effortLevel` to every recommendation. Use this mapping based on the nature of each recommendation:

| Recommendation | Effort Level | Rationale |
|---|---|---|
| rec-ra-1 (IT-Risikoinventar) | quick | Listing 5 systems is a 1-day activity |
| rec-ra-2 (Verantwortlichkeiten) | quick | Designating a person is immediate |
| rec-ih-1 (Incident-Response-Plan) | medium | Creating documented plan takes weeks |
| rec-ih-2 (Notfallkontakte) | quick | Collecting contact info is a 1-day task |
| rec-bc-1 (Backup-Strategie) | medium | Implementing 3-2-1 backup takes setup time |
| rec-bc-2 (Notfallplan) | medium | Writing and testing a plan takes weeks |
| rec-sc-1 (Lieferantenuebersicht) | quick | Listing existing suppliers is quick |
| rec-sc-2 (Sicherheitsklauseln) | strategic | Contract renegotiation is long-term |
| rec-ad-1 (Patch-Management) | quick | Enabling auto-updates is immediate |
| rec-ad-2 (Sicherheitsbewertung) | medium | Creating procurement checklist takes time |
| rec-ea-1 (Sicherheitsueberpruefung) | medium | Scheduling first audit takes planning |
| rec-ea-2 (Schwachstellenscans) | medium | Setting up scanning tools takes effort |
| rec-ch-1 (Awareness-Schulungen) | medium | Organizing training takes weeks |
| rec-ch-2 (Sicherheitsrichtlinien) | quick | Writing a 1-page password policy is fast |
| rec-cr-1 (Verschluesselungsstandards) | quick | Checking HTTPS is immediate |
| rec-cr-2 (Kryptokonzept) | medium | Documenting all encryption points takes time |
| rec-ac-1 (Zugriffskontrolle) | quick | Reviewing admin rights is a 1-day task |
| rec-ac-2 (Offboarding-Prozess) | quick | Creating a checklist is fast |
| rec-mc-1 (MFA aktivieren) | quick | Enabling MFA in M365/Google is same-day |
| rec-mc-2 (Sichere Kommunikation) | quick | Setting up Signal is immediate |

Do NOT change the `import` statement in recommendations.ts -- it already imports from `./types`. Just add the `effortLevel` field to each recommendation object.
  </action>
  <verify>
Run `npx tsc --noEmit` to verify no type errors.
Run `npx vitest run` to verify existing scoring engine tests still pass (39 tests).
  </verify>
  <done>All 20 recommendations have effortLevel field. EffortLevel type is exported from types.ts. All existing tests pass.</done>
</task>

<task type="auto">
  <name>Task 3: Add results page i18n translations (DE + EN)</name>
  <files>src/messages/de.json, src/messages/en.json</files>
  <action>
Add a new top-level `"results"` key to both translation files. Do NOT modify any existing keys -- only ADD the new `results` section.

**German (de.json) -- add `results` key at root level:**

```json
"results": {
  "title": "Ihre NIS2-Readiness-Ergebnisse",
  "subtitle": "Auswertung Ihrer Gap-Analyse nach Art. 21(2) NIS2-Richtlinie / SS 30 BSIG",
  "disclaimer": {
    "text": "Ihre Angaben deuten darauf hin, dass der folgende Reifegrad vorliegt. Ein hoher Score bedeutet nicht automatisch NIS2-Konformitaet. Jede Massnahme muss angemessen und wirksam fuer Ihr spezifisches Risikoprofil umgesetzt sein (SS 30 Abs. 1 BSIG). Diese Auswertung ersetzt keine Rechtsberatung oder professionelle Sicherheitsbewertung."
  },
  "overallScore": {
    "label": "Gesamter Reifegrad",
    "completionRate": "{value}% der Fragen beantwortet",
    "questionsAnswered": "{answered} von {total} Fragen"
  },
  "trafficLight": {
    "red": "Handlungsbedarf",
    "yellow": "Verbesserung noetig",
    "green": "Gut umgesetzt"
  },
  "verdict": {
    "red": "Erhebliche Luecken identifiziert -- dringender Handlungsbedarf",
    "yellow": "Teilweise umgesetzt -- gezielte Verbesserungen erforderlich",
    "green": "Solide Basis vorhanden -- kontinuierliche Pflege empfohlen"
  },
  "categoryCard": {
    "score": "{value}%",
    "topRecommendation": "Prioritaet #1",
    "legalRef": "Rechtsgrundlage",
    "bsiRef": "BSI-Grundschutz"
  },
  "effortLevel": {
    "quick": "Schnell umsetzbar",
    "medium": "Mittelfristig",
    "strategic": "Strategisch"
  },
  "quickWins": {
    "title": "Quick Wins -- sofort umsetzbare Massnahmen",
    "subtitle": "Die wirkungsvollsten Massnahmen, die Sie kurzfristig umsetzen koennen",
    "firstStep": "Erster Schritt"
  },
  "recommendations": {
    "title": "Handlungsempfehlungen nach Kategorie",
    "subtitle": "Sortiert nach Dringlichkeit -- Rot-Bereiche zuerst",
    "firstStep": "Naechster Schritt",
    "legalReference": "Rechtsgrundlage",
    "bsiReference": "BSI-Grundschutz"
  },
  "actions": {
    "retake": "Gap-Analyse wiederholen",
    "downloadPdf": "PDF herunterladen",
    "pdfComingSoon": "Verfuegbar in Kuerze"
  },
  "bsiLink": "BSI IT-Grundschutz-Kompendium",
  "noData": {
    "title": "Keine Ergebnisse verfuegbar",
    "text": "Sie haben die Gap-Analyse noch nicht abgeschlossen. Bitte fuehren Sie zuerst die Analyse durch.",
    "cta": "Zur Gap-Analyse"
  }
}
```

**English (en.json) -- add `results` key at root level:**

```json
"results": {
  "title": "Your NIS2 Readiness Results",
  "subtitle": "Assessment of your gap analysis per Art. 21(2) NIS2 Directive / Section 30 BSIG",
  "disclaimer": {
    "text": "Your responses indicate the following maturity level. A high score does not automatically mean NIS2 conformity. Every measure must be adequately and effectively implemented for your specific risk profile (Section 30(1) BSIG). This assessment does not replace legal advice or a professional security evaluation."
  },
  "overallScore": {
    "label": "Overall Readiness Level",
    "completionRate": "{value}% of questions answered",
    "questionsAnswered": "{answered} of {total} questions"
  },
  "trafficLight": {
    "red": "Action required",
    "yellow": "Improvement needed",
    "green": "Well implemented"
  },
  "verdict": {
    "red": "Significant gaps identified -- urgent action required",
    "yellow": "Partially implemented -- targeted improvements needed",
    "green": "Solid foundation -- continuous maintenance recommended"
  },
  "categoryCard": {
    "score": "{value}%",
    "topRecommendation": "Priority #1",
    "legalRef": "Legal basis",
    "bsiRef": "BSI IT-Grundschutz"
  },
  "effortLevel": {
    "quick": "Quick win",
    "medium": "Medium-term",
    "strategic": "Strategic"
  },
  "quickWins": {
    "title": "Quick Wins -- immediately actionable measures",
    "subtitle": "The highest-impact measures you can implement right away",
    "firstStep": "First step"
  },
  "recommendations": {
    "title": "Recommendations by Category",
    "subtitle": "Sorted by urgency -- red areas first",
    "firstStep": "Next step",
    "legalReference": "Legal basis",
    "bsiReference": "BSI IT-Grundschutz"
  },
  "actions": {
    "retake": "Retake assessment",
    "downloadPdf": "Download PDF",
    "pdfComingSoon": "Coming soon"
  },
  "bsiLink": "BSI IT-Grundschutz Compendium",
  "noData": {
    "title": "No results available",
    "text": "You have not completed the gap analysis yet. Please complete the analysis first.",
    "cta": "Go to gap analysis"
  }
}
```

IMPORTANT: Use proper German Umlauts in the actual translation values (ae -> ae, oe -> oe, ue -> ue, ss -> ss). The template above uses ASCII for readability but the real JSON must use: Luecken, Massnahmen, Konformitaet, Verfuegbar, Kuerze, fuehren, Naechster, Dringlichkeit, noetig with actual Umlauts (u+umlaut etc).

Wait -- looking at the existing de.json, it DOES use real Umlauts (e.g., "Pruefung", "groessten", "Massnahmen"). Follow that pattern: use real Unicode Umlauts throughout.

Merge the new `results` key into the existing JSON structure. Do not overwrite or remove any existing keys. Place the `results` key after the `gapAnalysis` key (before `recommendations` if present at root, but `recommendations` is already at root so place `results` between `gapAnalysis` and `recommendations`).
  </action>
  <verify>
Validate both JSON files parse correctly: `node -e "JSON.parse(require('fs').readFileSync('src/messages/de.json','utf8'))"` and same for en.json.
Run `npx tsc --noEmit` to verify no type errors from i18n changes.
  </verify>
  <done>Both de.json and en.json contain complete `results` key with all sub-keys. JSON is valid. No existing keys modified.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes (no type errors)
2. `npx vitest run` passes (all 39 existing tests pass)
3. Both shadcn components importable: `import { Badge } from '@/components/ui/badge'` and `import { Progress } from '@/components/ui/progress'`
4. `EffortLevel` type exported from types.ts
5. All 20 recommendations have `effortLevel` field
6. Both translation files valid JSON with `results` key
</verification>

<success_criteria>
- Badge and Progress shadcn/ui components installed and type-clean
- Recommendation type includes effortLevel: 'quick' | 'medium' | 'strategic'
- All 20 recommendations have effortLevel assigned
- de.json has complete results translations with proper Umlauts
- en.json has complete results translations
- All existing tests pass (zero regressions)
</success_criteria>

<output>
After completion, create `.planning/phases/05-results-dashboard/05-01-SUMMARY.md`
</output>
