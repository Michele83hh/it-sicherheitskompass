---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - next.config.ts
  - tsconfig.json
  - components.json
  - src/app/globals.css
  - src/app/[locale]/layout.tsx
  - src/app/[locale]/page.tsx
  - src/lib/utils.ts
  - src/lib/i18n/request.ts
  - src/lib/i18n/routing.ts
  - src/middleware.ts
  - src/messages/de.json
  - src/messages/en.json
  - src/stores/wizard-store.ts
  - .prettierrc
autonomous: true

must_haves:
  truths:
    - "Next.js dev server starts without errors and renders a page at localhost:3000"
    - "Navigating to /de and /en renders locale-specific content"
    - "shadcn/ui components (Button, Card) render with Tailwind styling"
    - "TypeScript compilation has zero errors"
    - "No cookies, no analytics scripts present in the application"
  artifacts:
    - path: "next.config.ts"
      provides: "Next.js configuration with next-intl plugin and serverExternalPackages"
      contains: "createNextIntlPlugin"
    - path: "src/lib/utils.ts"
      provides: "cn() utility for Tailwind class merging"
      exports: ["cn"]
    - path: "src/lib/i18n/routing.ts"
      provides: "Locale routing configuration (de, en)"
      contains: "defineRouting"
    - path: "src/lib/i18n/request.ts"
      provides: "next-intl request configuration"
      contains: "getRequestConfig"
    - path: "src/middleware.ts"
      provides: "next-intl middleware for locale routing"
      contains: "createMiddleware"
    - path: "src/messages/de.json"
      provides: "German translation messages"
    - path: "src/messages/en.json"
      provides: "English translation messages"
    - path: "src/stores/wizard-store.ts"
      provides: "Zustand store skeleton for assessment state"
      exports: ["useWizardStore"]
    - path: "src/app/[locale]/layout.tsx"
      provides: "Root layout with NextIntlClientProvider"
      contains: "NextIntlClientProvider"
    - path: "src/app/[locale]/page.tsx"
      provides: "Landing page using useTranslations"
      contains: "useTranslations"
    - path: "components.json"
      provides: "shadcn/ui configuration"
  key_links:
    - from: "next.config.ts"
      to: "src/lib/i18n/request.ts"
      via: "createNextIntlPlugin() references i18n request config"
      pattern: "createNextIntlPlugin"
    - from: "src/middleware.ts"
      to: "src/lib/i18n/routing.ts"
      via: "middleware imports routing config for locale detection"
      pattern: "import.*routing"
    - from: "src/app/[locale]/layout.tsx"
      to: "src/messages/"
      via: "NextIntlClientProvider loads messages for locale"
      pattern: "NextIntlClientProvider"
---

<objective>
Scaffold the Next.js 16 project with all core dependencies installed and configured: TypeScript, Tailwind CSS v4, shadcn/ui, next-intl (DE/EN), and zustand. The result is a running dev server that renders a basic locale-routed page with working i18n and at least two shadcn/ui components available.

Purpose: Every subsequent plan and phase depends on this foundation. Getting the toolchain right here prevents cascading configuration issues later.
Output: A running Next.js 16 application at localhost:3000 with /de and /en routes, shadcn/ui components available, zustand store skeleton, and zero TypeScript errors.
</objective>

<execution_context>
@C:\Users\mjoan\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\mjoan\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@C:\Users\mjoan\Desktop\nis2-readiness-check\.planning\PROJECT.md
@C:\Users\mjoan\Desktop\nis2-readiness-check\.planning\ROADMAP.md
@C:\Users\mjoan\Desktop\nis2-readiness-check\.planning\STATE.md
@C:\Users\mjoan\Desktop\nis2-readiness-check\.planning\research\STACK.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Next.js 16 project and install all dependencies</name>
  <files>
    package.json
    next.config.ts
    tsconfig.json
    .prettierrc
    src/lib/utils.ts
    components.json
  </files>
  <action>
    1. Run `npx create-next-app@latest . --typescript --tailwind --eslint --app --src-dir --turbopack --import-alias "@/*"` in the project root (C:\Users\mjoan\Desktop\nis2-readiness-check). Note: use `.` as the project name since the directory already exists.

    2. Install core dependencies:
       `npm install next-intl zustand`
       NOTE: Do NOT install @react-pdf/renderer, react-hook-form, @hookform/resolvers, or zod yet. Those are Phase 2+ concerns. Keep this lean.

    3. Install UI dependencies -- initialize shadcn/ui:
       `npx shadcn@latest init`
       When prompted, accept defaults. This creates components.json and sets up the ui/ directory.
       Then add initial components:
       `npx shadcn@latest add button card`
       Only button and card for now. More components added in later phases as needed.

    4. Install supporting libraries:
       `npm install clsx tailwind-merge lucide-react`

    5. Install dev dependencies:
       `npm install -D prettier prettier-plugin-tailwindcss`

    6. Create src/lib/utils.ts with the cn() utility:
       ```typescript
       import { clsx, type ClassValue } from 'clsx';
       import { twMerge } from 'tailwind-merge';

       export function cn(...inputs: ClassValue[]) {
         return twMerge(clsx(inputs));
       }
       ```
       NOTE: shadcn init may already create this file. If so, verify it matches this pattern. If it uses a different import path, keep shadcn's version.

    7. Create .prettierrc:
       ```json
       {
         "semi": true,
         "singleQuote": true,
         "tabWidth": 2,
         "trailingComma": "es5",
         "plugins": ["prettier-plugin-tailwindcss"]
       }
       ```

    8. Update next.config.ts to integrate next-intl:
       ```typescript
       import createNextIntlPlugin from 'next-intl/plugin';

       const withNextIntl = createNextIntlPlugin();

       const nextConfig = {
         serverExternalPackages: ['@react-pdf/renderer'],
       };

       export default withNextIntl(nextConfig);
       ```
       NOTE: Include serverExternalPackages now even though @react-pdf/renderer is not installed yet. This prevents having to reconfigure later and has no effect until the package is installed.

    9. Verify: `npm run dev` starts without errors. Kill the dev server after confirming.
  </action>
  <verify>
    - `npm run dev` starts and shows "Ready" message with localhost URL
    - `npx tsc --noEmit` returns zero errors
    - `ls src/components/ui/` shows button.tsx and card.tsx
    - components.json exists in project root
  </verify>
  <done>
    Next.js 16 dev server starts cleanly. TypeScript compiles without errors. shadcn/ui button and card components are available in src/components/ui/. Prettier config exists.
  </done>
</task>

<task type="auto">
  <name>Task 2: Configure next-intl locale routing and zustand store skeleton</name>
  <files>
    src/lib/i18n/routing.ts
    src/lib/i18n/request.ts
    src/middleware.ts
    src/messages/de.json
    src/messages/en.json
    src/stores/wizard-store.ts
    src/app/[locale]/layout.tsx
    src/app/[locale]/page.tsx
  </files>
  <action>
    1. Create src/lib/i18n/routing.ts:
       ```typescript
       import { defineRouting } from 'next-intl/routing';

       export const routing = defineRouting({
         locales: ['de', 'en'],
         defaultLocale: 'de',
       });
       ```

    2. Create src/lib/i18n/request.ts:
       ```typescript
       import { getRequestConfig } from 'next-intl/server';
       import { routing } from './routing';

       export default getRequestConfig(async ({ requestLocale }) => {
         let locale = await requestLocale;

         if (!locale || !routing.locales.includes(locale as any)) {
           locale = routing.defaultLocale;
         }

         return {
           locale,
           messages: (await import(`../../messages/${locale}.json`)).default,
         };
       });
       ```

    3. Create src/middleware.ts:
       ```typescript
       import createMiddleware from 'next-intl/middleware';
       import { routing } from './lib/i18n/routing';

       export default createMiddleware(routing);

       export const config = {
         matcher: ['/', '/(de|en)/:path*'],
       };
       ```

    4. Create src/messages/de.json with skeleton structure:
       ```json
       {
         "metadata": {
           "title": "NIS2 Readiness Check",
           "description": "Pruefen Sie in 15-20 Minuten, ob Ihr Unternehmen von NIS2 betroffen ist und wo Ihre groessten Compliance-Luecken liegen."
         },
         "common": {
           "appName": "NIS2 Readiness Check",
           "language": "Sprache",
           "german": "Deutsch",
           "english": "English",
           "startCheck": "Check starten",
           "learnMore": "Mehr erfahren"
         },
         "landing": {
           "hero": {
             "title": "Ist Ihr Unternehmen NIS2-ready?",
             "subtitle": "Finden Sie in 15-20 Minuten heraus, ob Ihr Unternehmen von der NIS2-Richtlinie betroffen ist und wo Ihre groessten Compliance-Luecken liegen.",
             "cta": "Kostenlos pruefen"
           },
           "features": {
             "anonymous": {
               "title": "100% Anonym",
               "description": "Keine Registrierung, keine Datenspeicherung. Ihre Angaben bleiben in Ihrem Browser."
             },
             "legal": {
               "title": "Rechtlich fundiert",
               "description": "Basierend auf NIS2UmsG, EU-Richtlinie 2022/2555 und BSI IT-Grundschutz."
             },
             "actionable": {
               "title": "Konkrete Empfehlungen",
               "description": "Erhalten Sie priorisierte Handlungsempfehlungen mit Gesetzesreferenzen."
             }
           }
         }
       }
       ```

    5. Create src/messages/en.json with matching structure:
       ```json
       {
         "metadata": {
           "title": "NIS2 Readiness Check",
           "description": "Find out in 15-20 minutes whether your company is affected by NIS2 and where your biggest compliance gaps are."
         },
         "common": {
           "appName": "NIS2 Readiness Check",
           "language": "Language",
           "german": "Deutsch",
           "english": "English",
           "startCheck": "Start check",
           "learnMore": "Learn more"
         },
         "landing": {
           "hero": {
             "title": "Is your company NIS2-ready?",
             "subtitle": "Find out in 15-20 minutes whether your company is affected by the NIS2 directive and where your biggest compliance gaps are.",
             "cta": "Check for free"
           },
           "features": {
             "anonymous": {
               "title": "100% Anonymous",
               "description": "No registration, no data storage. Your information stays in your browser."
             },
             "legal": {
               "title": "Legally founded",
               "description": "Based on NIS2UmsG, EU Directive 2022/2555 and BSI IT-Grundschutz."
             },
             "actionable": {
               "title": "Actionable recommendations",
               "description": "Receive prioritized recommendations with legal references."
             }
           }
         }
       }
       ```

    6. Restructure the app directory for locale routing. Delete the default src/app/page.tsx and src/app/layout.tsx that create-next-app generated (keep globals.css in src/app/). Create the [locale] directory structure:

       Create src/app/[locale]/layout.tsx:
       ```typescript
       import { NextIntlClientProvider } from 'next-intl';
       import { getMessages, getTranslations } from 'next-intl/server';
       import { notFound } from 'next/navigation';
       import { routing } from '@/lib/i18n/routing';
       import '../globals.css';

       type Props = {
         children: React.ReactNode;
         params: Promise<{ locale: string }>;
       };

       export async function generateMetadata({ params }: Props) {
         const { locale } = await params;
         const t = await getTranslations({ locale, namespace: 'metadata' });
         return {
           title: t('title'),
           description: t('description'),
         };
       }

       export default async function LocaleLayout({ children, params }: Props) {
         const { locale } = await params;

         if (!routing.locales.includes(locale as any)) {
           notFound();
         }

         const messages = await getMessages();

         return (
           <html lang={locale}>
             <body>
               <NextIntlClientProvider messages={messages}>
                 {children}
               </NextIntlClientProvider>
             </body>
           </html>
         );
       }
       ```
       IMPORTANT: In Next.js 16, params is a Promise. Always await it. Do NOT destructure params synchronously.

    7. Create src/app/[locale]/page.tsx (minimal, uses translations):
       ```typescript
       import { useTranslations } from 'next-intl';
       import { Button } from '@/components/ui/button';
       import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';

       export default function HomePage() {
         const t = useTranslations();

         return (
           <main className="flex min-h-screen flex-col items-center justify-center p-8">
             <h1 className="text-4xl font-bold mb-4">{t('landing.hero.title')}</h1>
             <p className="text-lg text-muted-foreground mb-8 max-w-2xl text-center">
               {t('landing.hero.subtitle')}
             </p>
             <Button size="lg">{t('landing.hero.cta')}</Button>

             <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mt-16 max-w-4xl">
               <Card>
                 <CardHeader>
                   <CardTitle>{t('landing.features.anonymous.title')}</CardTitle>
                 </CardHeader>
                 <CardContent>
                   <p>{t('landing.features.anonymous.description')}</p>
                 </CardContent>
               </Card>
               <Card>
                 <CardHeader>
                   <CardTitle>{t('landing.features.legal.title')}</CardTitle>
                 </CardHeader>
                 <CardContent>
                   <p>{t('landing.features.legal.description')}</p>
                 </CardContent>
               </Card>
               <Card>
                 <CardHeader>
                   <CardTitle>{t('landing.features.actionable.title')}</CardTitle>
                 </CardHeader>
                 <CardContent>
                   <p>{t('landing.features.actionable.description')}</p>
                 </CardContent>
               </Card>
             </div>
           </main>
         );
       }
       ```

    8. Create src/stores/wizard-store.ts (skeleton -- full implementation in Phase 2+):
       ```typescript
       import { create } from 'zustand';

       type WizardStep = 'landing' | 'affected-check' | 'gap-analysis' | 'results';

       interface WizardState {
         currentStep: WizardStep;
         setStep: (step: WizardStep) => void;
         reset: () => void;
       }

       const initialState = {
         currentStep: 'landing' as WizardStep,
       };

       export const useWizardStore = create<WizardState>((set) => ({
         ...initialState,
         setStep: (step) => set({ currentStep: step }),
         reset: () => set(initialState),
       }));
       ```

    9. Ensure there is NO root layout.tsx or root page.tsx outside of [locale]. If create-next-app generated src/app/layout.tsx and src/app/page.tsx, delete them. The [locale] layout is the root layout. Keep src/app/globals.css where it is.

    10. Run `npm run dev` and verify:
        - localhost:3000 redirects to /de (default locale)
        - /de shows German text ("Ist Ihr Unternehmen NIS2-ready?")
        - /en shows English text ("Is your company NIS2-ready?")
        - shadcn Button and Card render with styling
  </action>
  <verify>
    - `npm run dev` starts without errors
    - `curl -s http://localhost:3000 -L` redirects to /de and contains "NIS2"
    - `curl -s http://localhost:3000/en` contains "Is your company NIS2-ready"
    - `curl -s http://localhost:3000/de` contains "Ist Ihr Unternehmen NIS2-ready"
    - `npx tsc --noEmit` returns zero errors
    - src/stores/wizard-store.ts exists and exports useWizardStore
  </verify>
  <done>
    Dev server runs at localhost:3000. Navigating to /de shows German landing page text, /en shows English. shadcn/ui Button and Card render correctly. Zustand store skeleton exists. TypeScript has zero errors. No cookies or analytics in the response headers.
  </done>
</task>

</tasks>

<verification>
1. `npm run dev` starts without errors
2. `npx tsc --noEmit` returns zero TypeScript errors
3. http://localhost:3000 redirects to /de
4. /de renders German content with styled components
5. /en renders English content with styled components
6. Browser DevTools Network tab shows no analytics requests, no cookies set
7. src/components/ui/button.tsx and src/components/ui/card.tsx exist
8. src/stores/wizard-store.ts exports useWizardStore
</verification>

<success_criteria>
- Running Next.js 16 dev server with zero TypeScript errors
- Locale routing works (/de default, /en secondary)
- shadcn/ui components render with Tailwind styling
- next-intl translates all visible text between DE and EN
- Zustand store skeleton exists and can be imported
- No cookies, no analytics, no auth present
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
