---
phase: 07-polish-legal-deploy
plan: 02
type: execute
wave: 2
depends_on: ["07-01"]
files_modified:
  - src/app/[locale]/page.tsx
  - src/app/[locale]/check/page.tsx
  - src/app/[locale]/gap-analysis/page.tsx
  - src/app/[locale]/gap-analysis/steps/category-step.tsx
  - src/app/[locale]/results/page.tsx
  - src/app/[locale]/results/components/category-card.tsx
  - src/app/[locale]/results/components/overall-score-hero.tsx
  - src/app/[locale]/results/components/quick-wins-section.tsx
  - src/app/[locale]/results/components/recommendations-section.tsx
  - src/components/layout/header.tsx
  - src/components/layout/footer.tsx
  - src/app/[locale]/layout.tsx
autonomous: false

must_haves:
  truths:
    - "All pages render correctly at 375px width (iPhone) with no horizontal scrollbar or layout breakage"
    - "All pages render correctly at 768px (tablet) and 1280px (desktop)"
    - "Step transitions in wizards have subtle fade animation (0.3s)"
    - "Animations respect prefers-reduced-motion media query"
    - "No placeholder texts, no framework default branding, no console.log in source"
    - "Production build (npm run build) succeeds with zero errors"
    - "Header text is hidden on mobile, showing only shield icon"
  artifacts:
    - path: "src/app/[locale]/page.tsx"
      provides: "Responsive landing page"
    - path: "src/app/[locale]/results/page.tsx"
      provides: "Responsive results dashboard"
  key_links:
    - from: "src/app/[locale]/check/page.tsx"
      to: "CSS transitions"
      via: "transition-opacity duration-300 classes on step content"
      pattern: "transition.*opacity|animate-"
    - from: "src/app/[locale]/layout.tsx"
      to: "viewport meta"
      via: "Next.js metadata export"
      pattern: "viewport|metadata"
---

<objective>
Polish all pages for mobile/tablet/desktop responsiveness, add subtle step transition animations, ensure no placeholder text or framework defaults remain, verify production build, and prepare for Vercel deployment.

Purpose: Production-readiness across all device sizes with professional UX polish.
Output: Responsive layouts at 375px/768px/1280px, subtle animations, clean production build.
</objective>

<execution_context>
@C:\Users\mjoan\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\mjoan\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-polish-legal-deploy/07-RESEARCH.md
@.planning/phases/07-polish-legal-deploy/07-01-SUMMARY.md

Key existing files and their responsive concerns:
- src/app/[locale]/page.tsx — Landing page: hero text too large on mobile, grid cols need mobile stacking
- src/app/[locale]/check/page.tsx — Check wizard: step content needs fade transition on step change
- src/app/[locale]/gap-analysis/page.tsx — Gap wizard: needs transition on category change
- src/app/[locale]/results/page.tsx — Results: category cards grid needs mobile single-column
- src/app/[locale]/results/components/category-card.tsx — Card: score text + badge layout at narrow widths
- src/components/layout/header.tsx — Header: title text may overflow on small screens
- src/components/layout/footer.tsx — Footer: grid layout needs mobile stacking

Already responsive (from Phase 1):
- Step indicator: uses hidden sm:block for labels, w-12 sm:w-16 connecting lines
- Main containers: use max-w-* with px-4 sm:px-6 lg:px-8

tw-animate-css is already installed (v1.4.0) and provides animate-* utility classes.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Responsive polish across all pages for 375px mobile</name>
  <files>
    src/app/[locale]/page.tsx
    src/app/[locale]/check/page.tsx
    src/app/[locale]/gap-analysis/page.tsx
    src/app/[locale]/gap-analysis/steps/category-step.tsx
    src/app/[locale]/results/page.tsx
    src/app/[locale]/results/components/category-card.tsx
    src/components/layout/header.tsx
    src/components/layout/footer.tsx
    src/app/[locale]/layout.tsx
  </files>
  <action>
  Test and fix responsive layout at 375px (primary mobile), 768px (tablet), and 1280px (desktop).

  **1. Viewport meta tag verification:**
  Check `src/app/[locale]/layout.tsx` — Next.js App Router auto-generates viewport meta via the metadata export. Verify the html/body structure has no fixed widths. If metadata export doesn't exist, add:
  ```typescript
  export const metadata = {
    title: 'NIS2-Bereitschaftsprüfung',
    description: '...',
  };
  ```
  Next.js generates the viewport meta tag automatically in App Router, so this should already work. Just verify `<html>` and `<body>` have no fixed width styles.

  **2. Header (src/components/layout/header.tsx):**
  - On mobile (< sm), hide the title text and show only the Shield icon. The text "NIS2-Bereitschaftsprüfung" is too long for 375px.
  - Change: `<span className="text-xl font-semibold text-foreground">` to `<span className="hidden sm:inline text-xl font-semibold text-foreground">`
  - This keeps the shield icon always visible as the brand mark.

  **3. Landing page (src/app/[locale]/page.tsx):**
  - Hero h1: Change `text-4xl ... sm:text-5xl lg:text-6xl` — this is already responsive, verify it fits at 375px.
  - Value proposition cards: Already `md:grid-cols-3` — OK, stacks on mobile.
  - "How it works" steps grid: Already `md:grid-cols-3` — OK.
  - Trust section grid: Already `md:grid-cols-3` — OK.
  - CTA button: Verify it doesn't overflow at 375px. Change `px-8 py-6` to `px-6 py-4 sm:px-8 sm:py-6` for smaller mobile padding.

  **4. Check wizard (src/app/[locale]/check/page.tsx):**
  - Already uses `max-w-3xl px-4` — OK.
  - H1 is `text-3xl sm:text-4xl` — OK.

  **5. Gap analysis page (src/app/[locale]/gap-analysis/page.tsx):**
  - Already uses `max-w-4xl px-4` — OK.

  **6. Gap analysis category-step (src/app/[locale]/gap-analysis/steps/category-step.tsx):**
  - Question card padding: `p-6` may be tight at 375px. Change to `p-4 sm:p-6`.
  - Radio label padding: `p-4` — change to `p-3 sm:p-4`.
  - Question title: `text-lg` — fine, but check if wrapping works at 375px. Add `break-words` if needed.

  **7. Results page (src/app/[locale]/results/page.tsx):**
  - Category cards grid: Already `grid-cols-1 md:grid-cols-2 lg:grid-cols-3` — OK.
  - Action buttons: Already `flex-wrap` — OK.

  **8. Category card (src/app/[locale]/results/components/category-card.tsx):**
  - Score/questions row: The `flex items-baseline justify-between` may squeeze on very narrow cards. Verify at 375px.
  - Traffic light badge: Verify text doesn't wrap badly.

  **9. Footer (src/components/layout/footer.tsx):**
  - Already uses `md:grid-cols-3` — stacks on mobile, OK.
  - Verify text is readable at 375px. The disclaimer text is long — ensure leading-relaxed is set.

  **10. Production cleanup checks:**
  - Grep all source files for placeholder text: "[TODO", "[PLACEHOLDER", "Lorem", "example.com" (excluding legal page intentional placeholders).
  - Verify favicon exists (check src/app/favicon.ico or src/app/icon.png).
  - Verify no Next.js default branding (the default SVGs in public/).
  </action>
  <verify>
  - `npm run build` succeeds
  - Open dev server and use Chrome DevTools responsive mode:
    - 375px: No horizontal scroll, all text readable, cards stack vertically, header shows only icon
    - 768px: 2-column grids where applicable, comfortable spacing
    - 1280px: 3-column grids, full layout
  - No placeholder text visible (except legal page intentional brackets)
  </verify>
  <done>
  All pages render correctly at 375px/768px/1280px with no layout breakage. Header collapses gracefully on mobile. No placeholder text or framework defaults remain.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add subtle step transition animations with prefers-reduced-motion</name>
  <files>
    src/app/[locale]/check/page.tsx
    src/app/[locale]/gap-analysis/page.tsx
  </files>
  <action>
  Add CSS-based fade-in transition animations for wizard step changes.

  **1. Check wizard step transitions (src/app/[locale]/check/page.tsx):**
  Wrap each step content in a transition container. Since the step content is conditionally rendered (not animated out), use a simple fade-in approach with a key-based remount:

  ```tsx
  {/* Wrap step content in transition div */}
  <div
    key={currentStep}
    className="animate-in fade-in duration-300"
  >
    {currentStep === 0 && <SectorSelectionStep />}
    {currentStep === 1 && <CompanySizeStep />}
    {currentStep === 2 && <ResultStep />}
  </div>
  ```

  However, tw-animate-css may use different class names. Check what's available. Alternative approach using standard Tailwind:

  Create a CSS class for step transitions. Add to globals.css:
  ```css
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .step-transition {
    animation: fadeInUp 0.3s ease-out;
  }

  @media (prefers-reduced-motion: reduce) {
    .step-transition {
      animation: none;
    }
  }
  ```

  Then wrap step content: `<div key={currentStep} className="step-transition">`.

  **2. Gap analysis category transitions (src/app/[locale]/gap-analysis/page.tsx):**
  The CategoryStep already has `key={currentCategory.id}` which causes remount on category change. Wrap in the same transition class:

  ```tsx
  <div key={currentCategory.id} className="step-transition">
    <CategoryStep
      key={currentCategory.id}
      categoryId={currentCategory.id}
      isFirstCategory={isFirstCategory}
      isLastCategory={isLastCategory}
      locale={locale}
    />
  </div>
  ```

  Note: The outer div gets the key (for animation remount), and CategoryStep keeps its own key (for form remount).

  **3. Verify prefers-reduced-motion:**
  The CSS @media rule handles this automatically. Users with reduced motion preference see instant transitions with no animation.
  </action>
  <verify>
  - Navigate through check wizard steps — each step fades in smoothly (0.3s)
  - Navigate through gap analysis categories — each category fades in smoothly
  - In Chrome DevTools > Rendering > Emulate CSS media feature > prefers-reduced-motion: reduce — transitions are instant (no animation)
  - No jank or layout shift during transitions
  </verify>
  <done>
  Wizard step transitions have subtle 0.3s fade-in-up animation. Gap analysis category transitions have same animation. Both respect prefers-reduced-motion.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
  Complete responsive polish and animations for all pages:
  1. Mobile-responsive layout at 375px (header icon-only, stacked grids, adjusted padding)
  2. Tablet layout at 768px (2-column grids)
  3. Desktop layout at 1280px (3-column grids, full experience)
  4. Subtle fade-in-up animations on wizard step changes (check + gap analysis)
  5. prefers-reduced-motion respected
  6. No placeholder text, no framework defaults
  7. Production build succeeds
  </what-built>
  <how-to-verify>
  1. Start dev server: `npm run dev`
  2. Open Chrome DevTools responsive mode (Ctrl+Shift+I > Toggle Device Toolbar)
  3. Test at 375px width:
     - Landing page: Hero text fits, cards stack, CTA button full-width
     - Header: Only shield icon visible, no text overflow
     - Check wizard: Steps fit, disclaimer visible, content readable
     - Gap analysis: Questions readable, radio options not cramped
     - Results: Cards stack single-column, scores visible
     - Footer: Content stacks, all text readable
     - Impressum and Datenschutz pages: Content fits
  4. Test at 768px: Verify 2-column layouts appear
  5. Test at 1280px: Verify full 3-column layouts
  6. Test step transitions:
     - Go to /de/check, click through steps — each should fade in smoothly
     - Go to /de/gap-analysis (complete check first), navigate between categories — same fade
  7. Run `npm run build` — should succeed with zero errors
  8. Check that "Rechtsstand: Februar 2026" appears in footer
  </how-to-verify>
  <resume-signal>Type "approved" or describe specific issues to fix</resume-signal>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. All pages render without horizontal scroll at 375px
3. Header shows only shield icon at 375px, full text at 640px+
4. Wizard step changes have subtle 0.3s fade-in-up animation
5. prefers-reduced-motion disables animations
6. No console.log in source (grep confirms)
7. No placeholder text (except intentional legal page brackets)
8. Production build size is reasonable (no unexpectedly large bundles)
</verification>

<success_criteria>
- Tool works correctly on desktop (1280px), tablet (768px), and mobile (375px) with no layout breakage
- Subtle step transition animations present and respecting motion preferences
- Production build succeeds, no console.log statements, no placeholder texts, no framework default branding
- Ready for Vercel deployment
</success_criteria>

<output>
After completion, create `.planning/phases/07-polish-legal-deploy/07-02-SUMMARY.md`
</output>
