---
phase: 07-polish-legal-deploy
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/[locale]/imprint/page.tsx
  - src/app/[locale]/privacy/page.tsx
  - src/app/[locale]/check/page.tsx
  - src/messages/de.json
  - src/messages/en.json
  - next.config.ts
autonomous: true

must_haves:
  truths:
    - "Impressum page accessible via /de/imprint and /en/imprint with all DDG section 5 mandatory fields"
    - "Datenschutzhinweis page accessible via /de/privacy and /en/privacy confirming no personal data collection"
    - "Pre-assessment disclaimer appears on check page before user begins wizard"
    - "Classification reasons use conditional language (deuten darauf hin, voraussichtlich) instead of definitive statements"
    - "Rechtsstand-Datum visible in footer and PDF as 'Rechtsstand: Februar 2026'"
    - "Production build has zero console.log statements (removeConsole configured)"
  artifacts:
    - path: "src/app/[locale]/imprint/page.tsx"
      provides: "Legal Impressum page per DDG section 5"
      min_lines: 30
    - path: "src/app/[locale]/privacy/page.tsx"
      provides: "Datenschutzhinweis page"
      min_lines: 20
  key_links:
    - from: "src/components/layout/footer.tsx"
      to: "/imprint and /privacy"
      via: "existing Link components"
      pattern: "href.*imprint|href.*privacy"
    - from: "src/messages/de.json"
      to: "src/app/[locale]/imprint/page.tsx"
      via: "useTranslations('legal')"
      pattern: "legal\\.imprint"
---

<objective>
Create legally required pages (Impressum, Datenschutzhinweis), add pre-assessment disclaimer to the check wizard, audit and fix conditional language in classification results, update Rechtsstand-Datum to Februar 2026, and configure production console removal.

Purpose: German Telemedienrecht compliance (DDG section 5) and legal defensibility of the tool's advisory nature.
Output: Two new legal pages, updated i18n files, pre-assessment disclaimer component, production-ready next.config.ts.
</objective>

<execution_context>
@C:\Users\mjoan\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\mjoan\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-polish-legal-deploy/07-RESEARCH.md

Key existing files:
- src/components/layout/footer.tsx — Already has links to /imprint and /privacy, has copyright + legalDate
- src/app/[locale]/check/page.tsx — Check wizard, needs pre-assessment disclaimer added before wizard starts
- src/app/[locale]/results/components/disclaimer-banner.tsx — Existing results disclaimer (reference for style)
- src/messages/de.json — Has footer.legalDate "Stand der Rechtslage: Januar 2025" (needs update to Februar 2026)
- src/messages/en.json — Matching English translations
- next.config.ts — Currently minimal, needs compiler.removeConsole
- src/lib/i18n/routing.ts — Uses createNavigation, imports Link from @/lib/i18n/routing (NOT next/link)
- src/app/[locale]/layout.tsx — Root layout with Header/Footer wrapping all pages
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Impressum and Datenschutzhinweis pages with i18n content</name>
  <files>
    src/app/[locale]/imprint/page.tsx
    src/app/[locale]/privacy/page.tsx
    src/messages/de.json
    src/messages/en.json
  </files>
  <action>
  1. Add translation keys to de.json and en.json under a new top-level "legal" object:

  **de.json "legal" section:**
  ```json
  "legal": {
    "imprint": {
      "title": "Impressum",
      "infoTitle": "Angaben gemäß § 5 DDG",
      "name": "[Name / Firma]",
      "address": "[Straße Nr.]\n[PLZ Ort]",
      "contactTitle": "Kontakt",
      "email": "E-Mail: [email@example.com]",
      "phone": "Telefon: [+49 ...]",
      "responsibleTitle": "Inhaltlich verantwortlich gem. § 18 Abs. 2 MStV",
      "responsiblePerson": "[Name der verantwortlichen Person]\n[Adresse]",
      "disclaimerTitle": "Haftungsausschluss",
      "disclaimerText": "Die Inhalte dieser Website wurden mit größter Sorgfalt erstellt. Für die Richtigkeit, Vollständigkeit und Aktualität der Inhalte können wir jedoch keine Gewähr übernehmen. Dieses Tool dient ausschließlich als unverbindliche Orientierungshilfe und stellt keine Rechtsberatung dar.",
      "copyrightTitle": "Urheberrecht",
      "copyrightText": "Die durch die Seitenbetreiber erstellten Inhalte und Werke auf diesen Seiten unterliegen dem deutschen Urheberrecht.",
      "placeholderNotice": "Hinweis: Die mit [eckigen Klammern] gekennzeichneten Angaben müssen vor Veröffentlichung durch die tatsächlichen Daten ersetzt werden."
    },
    "privacy": {
      "title": "Datenschutzhinweis",
      "introTitle": "Datenschutz auf einen Blick",
      "introText": "Der Schutz Ihrer persönlichen Daten ist uns wichtig. Nachfolgend informieren wir Sie über den Umgang mit Ihren Daten bei der Nutzung dieser Website.",
      "noDataTitle": "Keine Erhebung personenbezogener Daten",
      "noDataText": "Diese Website erhebt, speichert oder verarbeitet keine personenbezogenen Daten. Es werden keine Cookies gesetzt, keine Tracking-Dienste eingesetzt und keine Analyse-Tools verwendet.",
      "localStorageTitle": "Lokale Datenspeicherung im Browser",
      "localStorageText": "Ihre Eingaben im Fragebogen werden ausschließlich lokal in Ihrem Browser (Local Storage) gespeichert, um den Fortschritt während der Nutzung zu erhalten. Diese Daten verlassen zu keinem Zeitpunkt Ihren Browser und werden nicht an unsere oder andere Server übermittelt. Sie können diese Daten jederzeit durch Löschen des Browser-Speichers entfernen.",
      "hostingTitle": "Hosting",
      "hostingText": "Diese Website wird bei Vercel Inc. gehostet. Beim Aufruf der Website werden automatisch technische Zugriffsdaten (z.B. IP-Adresse, Zeitpunkt des Zugriffs) vom Hosting-Provider verarbeitet. Details finden Sie in der Datenschutzerklärung von Vercel: https://vercel.com/legal/privacy-policy",
      "rightsTitle": "Ihre Rechte",
      "rightsText": "Sie haben das Recht auf Auskunft, Berichtigung, Löschung und Einschränkung der Verarbeitung Ihrer personenbezogenen Daten. Da wir keine personenbezogenen Daten erheben, entfallen diese Rechte im Kontext dieser Website.",
      "contactTitle": "Kontakt",
      "contactText": "Bei Fragen zum Datenschutz wenden Sie sich bitte an die im Impressum genannte Kontaktadresse."
    }
  }
  ```

  **en.json "legal" section:** Equivalent English translations, keeping "DDG" and "MStV" as German law names.

  2. Create `src/app/[locale]/imprint/page.tsx`:
     - Use `useTranslations('legal.imprint')` for all content
     - Standard layout: `<div className="mx-auto max-w-4xl px-4 py-12 sm:py-16">`
     - Sections with h2 headings for: Angaben, Kontakt, Verantwortlich, Haftungsausschluss, Urheberrecht
     - Show placeholder notice in a blue info box (similar style to existing disclaimer banners)
     - Mark as 'use client' for useTranslations

  3. Create `src/app/[locale]/privacy/page.tsx`:
     - Use `useTranslations('legal.privacy')` for all content
     - Same layout structure as imprint
     - Sections: Datenschutz auf einen Blick, Keine Erhebung, Lokale Datenspeicherung, Hosting, Ihre Rechte, Kontakt
     - Mark as 'use client' for useTranslations

  IMPORTANT: Footer already has links to /imprint and /privacy — no footer changes needed.
  IMPORTANT: Use standard Tailwind prose-like classes, no new dependencies needed.
  </action>
  <verify>
  - `npm run build` succeeds
  - Visit /de/imprint and /en/imprint — legal content renders with German/English translations
  - Visit /de/privacy and /en/privacy — privacy notice renders correctly
  - Footer links navigate correctly to these pages
  </verify>
  <done>
  Both legal pages render with full i18n content, accessible within 1 click from any page via footer links.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add pre-assessment disclaimer, fix conditional language, update Rechtsstand, configure removeConsole</name>
  <files>
    src/app/[locale]/check/page.tsx
    src/messages/de.json
    src/messages/en.json
    next.config.ts
  </files>
  <action>
  1. **Pre-assessment disclaimer on check page:**
     Add i18n keys under "disclaimers" in de.json and en.json:
     ```json
     "disclaimers": {
       "preAssessment": {
         "title": "Hinweis",
         "noLegalAdvice": "Diese Prüfung stellt keine Rechtsberatung dar und ersetzt nicht die Beratung durch einen Fachanwalt oder IT-Sicherheitsexperten.",
         "orientationOnly": "Die Ergebnisse dienen ausschließlich als unverbindliche Orientierungshilfe zur Einschätzung Ihrer NIS2-Betroffenheit und Ihres Umsetzungsstands."
       }
     }
     ```
     English equivalent:
     ```json
     "disclaimers": {
       "preAssessment": {
         "title": "Notice",
         "noLegalAdvice": "This assessment does not constitute legal advice and does not replace consultation with a specialized lawyer or IT security expert.",
         "orientationOnly": "The results serve exclusively as a non-binding orientation aid for assessing your NIS2 applicability and implementation status."
       }
     }
     ```

     In `src/app/[locale]/check/page.tsx`, add a disclaimer banner between the subtitle and StepIndicator. Use AlertTriangle icon from lucide-react (already imported in the project) with a blue info-style banner:
     ```tsx
     <div className="mb-8 rounded-lg border border-blue-200 bg-blue-50 p-4">
       <div className="flex gap-3">
         <Info className="mt-0.5 size-5 shrink-0 text-blue-600" />
         <div className="space-y-1 text-sm text-blue-900">
           <p className="font-semibold">{tDisclaimer('preAssessment.title')}</p>
           <p>{tDisclaimer('preAssessment.noLegalAdvice')}</p>
           <p>{tDisclaimer('preAssessment.orientationOnly')}</p>
         </div>
       </div>
     </div>
     ```
     Add `const tDisclaimer = useTranslations('disclaimers');` and import `Info` from lucide-react.
     Show the disclaimer only on steps 0 and 1 (not on result step).

  2. **Conditional language audit and fix:**
     In de.json, update classification reasons to use conditional language:
     - "kritis": Change "sind Sie ... eingestuft" to "deutet dies darauf hin, dass Sie ... eingestuft werden"
       New: "Als Betreiber kritischer Infrastruktur (KRITIS) deutet dies darauf hin, dass Sie unabhängig von der Unternehmensgröße als besonders wichtige Einrichtung einzustufen sind."
     - "alwaysQualified": Change "fällt ... unter" to "deutet darauf hin, dass Ihr Tätigkeitsbereich ... unter ... fällt"
       New: "Ihre Angaben deuten darauf hin, dass Ihr Tätigkeitsbereich (qualifizierter Vertrauensdiensteanbieter, DNS-Diensteanbieter oder TLD-Namenregister) unabhängig von der Unternehmensgröße unter die besonders wichtigen Einrichtungen fällt."
     - "anlage1LargeEntity": Change "erfüllt" to "Ihre Angaben deuten darauf hin, dass Ihr Unternehmen ... erfüllt"
       New: "Ihre Angaben deuten darauf hin, dass Ihr Unternehmen die Größenschwellen für besonders wichtige Einrichtungen erfüllt: mindestens 250 Beschäftigte ODER Jahresumsatz über 50 Mio. EUR und Bilanzsumme über 43 Mio. EUR."
     - "standardThreshold": Same pattern.
       New: "Ihre Angaben deuten darauf hin, dass Ihr Unternehmen die Schwellenwerte für wichtige Einrichtungen erfüllt: mindestens 50 Beschäftigte ODER Jahresumsatz über 10 Mio. EUR und Bilanzsumme über 10 Mio. EUR."
     - "belowThreshold": Already uses "voraussichtlich" — keep as is.
     - "sectorNotRegulated": Already conditional enough — keep as is.

     Apply matching changes to en.json classification reasons using "Your information suggests that..." pattern.

  3. **Update Rechtsstand-Datum:**
     In de.json, change footer.legalDate from "Stand der Rechtslage: Januar 2025" to "Rechtsstand: Februar 2026".
     In en.json, change footer.legalDate to "Legal status: February 2026".
     In de.json, change pdf.rechtstandDatum from "Januar 2025" to "Februar 2026".
     In en.json, change pdf.rechtstandDatum to "February 2026".

  4. **Configure removeConsole in next.config.ts:**
     Update next.config.ts to add compiler option:
     ```typescript
     const nextConfig = {
       serverExternalPackages: ['@react-pdf/renderer'],
       compiler: {
         removeConsole: process.env.NODE_ENV === 'production'
           ? { exclude: ['error', 'warn'] }
           : false,
       },
     };
     ```
  </action>
  <verify>
  - `npm run build` succeeds
  - Check page shows disclaimer banner before wizard content on steps 0 and 1
  - Classification reasons in de.json contain "deuten darauf hin" or "voraussichtlich" (no definitive "sind Sie ... eingestuft")
  - Footer shows "Rechtsstand: Februar 2026"
  - next.config.ts has removeConsole configured
  - Grep for definitive classification phrases returns empty: `grep -n "sind Sie.*eingestuft\|erfüllt die" src/messages/de.json` finds nothing definitive without conditional framing
  </verify>
  <done>
  Pre-assessment disclaimer visible on check page. All classification results use conditional language. Rechtsstand updated to February 2026. Production build configured to strip console.log.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. /de/imprint shows Impressum with all DDG section 5 sections
3. /de/privacy shows Datenschutzhinweis confirming no data collection
4. /en/imprint and /en/privacy show English translations
5. /de/check shows blue disclaimer banner above wizard
6. All classification.reasons in de.json use conditional phrasing ("deuten darauf hin", "voraussichtlich")
7. Footer legalDate reads "Rechtsstand: Februar 2026"
8. next.config.ts compiler.removeConsole is configured
</verification>

<success_criteria>
- Legal pages accessible via footer links from any page (1-click access requirement)
- Pre-assessment disclaimer appears before wizard interaction
- No definitive classification language (all conditional: "Ihre Angaben deuten darauf hin...")
- Rechtsstand-Datum is February 2026 in both footer and PDF
- Production console.log removal configured
</success_criteria>

<output>
After completion, create `.planning/phases/07-polish-legal-deploy/07-01-SUMMARY.md`
</output>
